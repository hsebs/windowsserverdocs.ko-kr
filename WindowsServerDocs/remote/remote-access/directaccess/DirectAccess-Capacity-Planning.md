---
title: DirectAccess 용량 계획
description: Windows server 2012 DirectAccess 서버 성능에 대 한 보고서에이 항목을 사용 하 여 Windows Server 2016의 DirectAccess 용량 계획을 지원할 수 있습니다.
manager: brianlic
ms.prod: windows-server
ms.technology: networking-da
ms.topic: article
ms.assetid: 456e5971-3aa7-4a24-bc5d-0c21fec7687e
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 413dc88ce9ec551a318b63f3df44ed256f289219
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/08/2020
ms.locfileid: "80815796"
---
# <a name="directaccess-capacity-planning"></a>DirectAccess 용량 계획

>적용 대상: Windows Server(반기 채널), Windows Server 2016

이 문서는 Windows Server 2012 DirectAccess 서버 성능에 대한 보고서입니다. 고사양 컴퓨터 하드웨어와 저사양 컴퓨터 하드웨어를 사용하여 처리 용량을 확인하기 위한 테스트가 수행되었습니다. 고사양 및 저사양 CPU 성능은 네트워크 트래픽 처리량과 사용되는 클라이언트 유형에 따라 결정되었습니다. 일반적인 DirectAccess 배포(및 이러한 테스트의 기준)는 1/3(30%)이 IPHTTPS 클라이언트로 구성되고 2/3(70%)가 Teredo 클라이언트로 구성됩니다. Teredo 클라이언트가 IPHTTPS 클라이언트보다 성능이 뛰어난데, 그 이유에는 Windows Server 2012에서 모든 CPU 코어의 사용을 허용하는 RSS(수신측 배율)를 활용하기 때문인 것도 포함됩니다. 이 테스트에서는 RSS를 사용하므로 하이퍼 스레딩이 사용되지 않습니다. 또한 Windows Server 2012의 TCP/IP는 UDP 트래픽을 지원하므로 Teredo 클라이언트에서 CPU 간에 부하를 분산할 수 있습니다.  
  
데이터는 고사양(8코어, 8GB) 서버에서 보다 일반적인 하드웨어와 저사양(4코어, 4GB) 서버 모두에서 수집되었습니다.  다음은 750 클라이언트 (562 Teredo, 188 IPHTTPS)가 ~ 77 mbps/sec를 실행 하는 저급 하드웨어의 새로운 Windows 8 작업 관리자의 스크린샷입니다. 이는 스마트 카드 자격 증명을 제공 하지 않는 사용자를 시뮬레이션 하기 위한 것입니다.  
  
테스트 결과, Windows 8에서는 Teredo가 IPHTTPS보다 성능이 뛰어나지만 Teredo와 IPHTTPS 둘 다 Windows 7에 비해 대역폭 사용량이 향상된 것으로 나타났습니다.  
  
![테스트 결과](../../media/DirectAccess-Capacity-Planning/DACapacityPlanning1.gif)  
  
## <a name="high-end-hardware-test-environment"></a>고사양 하드웨어 테스트 환경  
다음 차트에서는 고사양 하드웨어 성능 테스트 환경의 결과를 보여 줍니다. 모든 테스트 결과 및 분석은 이 문서에 자세히 나와 있습니다.  
  
||||  
|-|-|-|  
|구성-하드웨어|저사양 하드웨어(4GB Ram, 4코어)|고사양 하드웨어(8GB, 8코어)|  
|이중 터널<p>-PKI<p>-DNS64/NAT64 포함|50% CPU에서 750대 동시 연결, Corpnet NIC 처리량 75Mbps에서 50% 메모리 도전적 목표는 50% CPU에서 1000명의 사용자 지원|50% CPU에서 1,500대 동시 연결, Corpnet NIC 처리량 150Mbps에서 50% 메모리|  
## <a name="test-environment"></a>테스트 환경

**성능 도구 토폴로지**  
  
![테스트 환경](../../media/DirectAccess-Capacity-Planning/DACapacityPlanning2.gif)  
  
성능 테스트 환경은 5대의 컴퓨터로 구성되어 있습니다. 저사양 테스트에 4코어 4GB DirectAccess 서버 1대가 사용되고, 고사양 하드웨어 테스트에 8코어 16GB DirectAccess 서버 1대가 사용되었습니다. 저사양 및 고사양 테스트 환경에서 백 엔드 서버(전송측) 1대와 클라이언트 컴퓨터(수신측) 2대가 사용되었습니다.  수신측은 두 대의 클라이언트 컴퓨터 간에 분할됩니다. 그렇지 않으면 수신측은 CPU 바인딩되고 대역폭과 클라이언트 수가 제한됩니다. 수신측에는 수백 대의 클라이언트(HTTPS 또는 Teredo 클라이언트)를 시뮬레이션할 시뮬레이터가 있습니다. IPsec과 DOSp 둘 다 구성되어 있습니다. RSS는 DirectAccess 서버에서 사용됩니다. RSS 대기열 크기는 8로 설정되어 있습니다.  RSS를 구성하지 않으면 다른 코어가 미달 사용되는 동안 단일 프로세서의 사용률이 높아집니다. 또한 DirectAccess 서버는 하이퍼 스레딩이 해제된 4코어 컴퓨터입니다.  RSS는 실제 코어에서만 작동하고 하이퍼 스레딩을 사용할 경우 왜곡된 결과가 생성되기 때문에 하이퍼 스레딩이 해제됩니다. 이는 일부 코어가 균일하게 로드되지 않음을 의미합니다.  
  
## <a name="testing-results-for-low-end-hardware"></a>저사양 하드웨어에 대한 테스트 결과

1000대의 클라이언트와 750대의 클라이언트에 대해 테스트를 수행했습니다.  두 경우 모두 트래픽이 Teredo 70%, IPHTTPS 30%로 분할되었습니다.  모든 테스트에 클라이언트당 2개의 IPsec 터널을 사용하는 Nat64를 통한 TCP 트래픽이 포함되었습니다.  모든 테스트에서 메모리 사용률은 낮고 CPU 사용률은 적절했습니다.  
  
**개별 테스트 결과:**  
  
다음 섹션에서는 개별 테스트에 대해 설명합니다. 각 섹션 제목은 각 테스트의 주요 요소를 강조하며, 그 뒤에 결과에 대한 요약 설명과 자세한 결과 데이터를 보여 주는 차트가 있습니다.  
  
**낮은 종료 성능: 750 클라이언트, 70/30 분할, 84.17 메가 비트/초 처리량:**  
  
다음 세 가지 테스트는 저사양 하드웨어를 나타냅니다.  아래의 테스트는 처리량이 84.17Mbps이고 트래픽이 Teredo 562대와 IPHTTPS 188대로 분할된 750대의 클라이언트에 대해 실행되었습니다. Teredo MTU는 1472로 설정되었으며, Teredo 분로가 사용되었습니다. CPU 사용률은 세 테스트에서 평균 46.42%였고, 평균 메모리 사용률(사용 가능한 총 메모리 4GB 중 커밋된 바이트의 백분율)은 25.95%였습니다.  
  
||||||||  
|-|-|-|-|-|-|-|  
|**시나리오**|**Cpu 평균 (카운터에서)**|**Mbit/s (Corp Side)**|**Mbit/s (인터넷 쪽)**|**활성 QMSA**|**활성 MMSA**|**메모리 사용률 (4 개의 4Gb 시스템)**|  
|**낮은 종단간 하드웨어.  562 Teredo 클라이언트  188 IPHTTPS 클라이언트.**|47.7472542|84.3|119.13|1502.05|1502.1|26.27%|  
|**낮은 종단간 하드웨어.  562 Teredo 클라이언트  188 IPHTTPS 클라이언트.**|46.3889778|84.146|118.73|1501.25|1501.2|25.90%|  
|**낮은 종단간 하드웨어.  562 Teredo 클라이언트  188 IPHTTPS 클라이언트.**|45.113082|84.0494|118.43|1546.14|1546.1|25.68%|  
  
**1000 클라이언트, 70/30 분할, 78 메가 비트/초 처리량:**  
  
다음 세 가지 테스트는 저사양 하드웨어의 성능을 나타냅니다. 아래의 테스트는 처리량이 78.64Mbps 이하이고 트래픽이 Teredo 700대와 IPHTTPS 300대로 분할된 1000대의 클라이언트에 대해 실행되었습니다.  Teredo MTU는 1472로 설정되었으며, Teredo 분로가 사용되었습니다.  CPU 사용률은 평균 50.7% 이하였고, 평균 메모리 사용률(사용 가능한 총 메모리 4GB 중 커밋된 바이트의 백분율)은 28.7% 이하였습니다.  
  
||||||||  
|-|-|-|-|-|-|-|  
|**시나리오**|**Cpu 평균 (카운터에서)**|**Mbit/s (Corp Side)**|**Mbit/s (인터넷 쪽)**|**활성 QMSA**|**활성 MMSA**|**메모리 사용률 (4 개의 4Gb 시스템)**|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|51.28406247|78.6432|113.19|2002.42|1502.1|25.59%|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|51.06993128|78.6402|113.22|2001.4|1501.2|30.87%|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|49.75235617|78.6387|113.2|2002.6|1546.1|30.66%|  
  
**1000 클라이언트, 70/30 분할, 109 메가 비트/초 처리량:**  
  
아래의 테스트는 처리량이 109.2Mbps 이하이고 트래픽이 Teredo 700대와 IPHTTPS 300대로 분할된 1000대의 클라이언트에 대해 실행되었습니다. Teredo MTU는 1472로 설정되었으며, Teredo 분로가 사용되었습니다. CPU 사용률은 세 테스트에서 평균 59.06% 이하였고, 평균 메모리 사용률(사용 가능한 총 메모리 4GB 중 커밋된 바이트의 백분율)은 27.34% 이하였습니다.  
  
||||||||  
|-|-|-|-|-|-|-|  
|**시나리오**|**Cpu 평균 (카운터에서)**|**Mbit/s (Corp Side)**|**Mbit/s (인터넷 쪽)**|**활성 QMSA**|**활성 MMSA**|**메모리 사용률 (4 개의 4Gb 시스템)**|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|59.81640675|108.305|153.14|2001.64|2001.6|24.38%|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|59.46473798|110.969|157.53|2005.22|2005.2|28.72%|  
|**낮은 종단간 하드웨어.  700 Teredo 클라이언트  300 IPHTTPS 클라이언트.**|57.89089768|108.305|153.14|1999.53|2018.3|24.38%|  
  
## <a name="testing-results-for-high-end-hardware"></a>고사양 하드웨어에 대한 테스트 결과  
1500대의 클라이언트로 테스트를 수행했습니다. 트래픽은 Teredo 70%, IPHTTPS 30%로 분할되었습니다. 모든 테스트에 클라이언트당 2개의 IPsec 터널을 사용하는 Nat64를 통한 TCP 트래픽이 포함되었습니다. 모든 테스트에서 메모리 사용률은 낮고 CPU 사용률은 적절했습니다.  
  
**개별 테스트 결과:**  
  
다음 섹션에서는 개별 테스트에 대해 설명합니다. 각 섹션 제목은 각 테스트의 주요 요소를 강조하며, 그 뒤에 결과에 대한 요약 설명과 자세한 결과 데이터가 포함된 차트가 있습니다.  
  
**1500 클라이언트, 70/30 분할, 153.2 메가 비트/초 처리량**  
  
다음 다섯 가지 테스트는 고사양 하드웨어를 나타냅니다. 아래의 테스트는 평균 처리량이 153.2Mbps이고 트래픽이 Teredo 1050대와 IPHTTPS 450대로 분할된 1500대의 클라이언트에 대해 실행되었습니다. CPU 사용률은 다섯 가지 테스트에서 평균 50.68%였고, 평균 메모리 사용률(사용 가능한 총 메모리 8GB 중 커밋된 바이트의 백분율)은 22.25%였습니다.  
  
||||||||  
|-|-|-|-|-|-|-|  
|**시나리오**|**Cpu 평균 (카운터에서)**|**Mbit/s (Corp Side)**|**Mbit/s (인터넷 쪽)**|**활성 QMSA**|**활성 MMSA**|**메모리 사용률 (4 개의 4Gb 시스템)**|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|51.712437|157.029|216.29|3000.31|3046|21.58%|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|48.86020205|151.012|206.53|3002.86|3045.3|21.15%|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|52.23979519|155.511|213.45|3001.15|3002.9|22.90%|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|51.26269767|155.09|212.92|3000.74|3002.4|22.91%|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|50.15751307|154.772|211.92|3000.9|3002.1|22.93%|  
|**고성능 하드웨어.  1050 Teredo 클라이언트  450 IPHTTPS 클라이언트.**|49.83665607|145.994|201.92|3000.51|3006|22.03%|  
  
![상위 하드웨어 테스트 결과](../../media/DirectAccess-Capacity-Planning/DACapacityPlanning3.gif)  
  


