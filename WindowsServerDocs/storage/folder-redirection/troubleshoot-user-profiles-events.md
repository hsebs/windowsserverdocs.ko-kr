---
title: 이벤트를 사용한 사용자 프로필 문제 해결
description: 이벤트 및 추적 로그를 사용하여 사용자 프로필을 로드 및 언로드하는 문제를 해결하는 방법입니다.
ms.prod: windows-server
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 04/05/2018
ms.localizationpriority: medium
ms.openlocfilehash: 9e927a77627e786015a928d798aafee13a2cc34b
ms.sourcegitcommit: 3a3d62f938322849f81ee9ec01186b3e7ab90fe0
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2020
ms.locfileid: "71394383"
---
# <a name="troubleshoot-user-profiles-with-events"></a>이벤트를 사용한 사용자 프로필 문제 해결

>적용 대상: Windows 10, Windows 8, Windows 8.1, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012 및 Windows Server(반기 채널).

이 항목에서는 이벤트 및 추적 로그를 사용하여 사용자 프로필을 로드 및 언로드하는 문제를 해결하는 방법을 설명합니다. 다음 섹션에서는 사용자 프로필 정보를 기록하는 세 개의 이벤트 로그를 사용하는 방법을 설명합니다.

## <a name="step-1-checking-events-in-the-application-log"></a>1단계: 애플리케이션 로그의 이벤트 확인

사용자 프로필 로드 및 언로드(로밍 사용자 프로필 포함)와 관련된 문제를 해결하는 첫 번째 단계는 이벤트 뷰어를 사용하여 사용자 프로필 서비스가 애플리케이션 로그에 기록하는 경고 및 오류 이벤트를 검사하는 것입니다.

애플리케이션 로그에서 사용자 프로필 서비스 이벤트를 보는 방법은 다음과 같습니다.

1. 이벤트 뷰어를 시작합니다. 이렇게 하려면 **제어판**열고 **시스템 및 보안**을 선택한 다음, **관리 도구** 섹션에서 **이벤트 로그 보기**를 선택합니다. 이벤트 뷰어 창이 열립니다.
2. 콘솔 트리에서 먼저 **Windows 로그**로 이동한 다음, **애플리케이션**으로 이동합니다.
3. 작업 창에서 **현재 로그 필터링**을 선택합니다. 현재 로그 필터링 대화 상자가 열립니다.
4. **이벤트 원본** 상자에서 **사용자 프로필 서비스** 확인란을 선택한 다음, **확인**을 선택합니다.
5. 오류 이벤트에 특히 주의하면서 이벤트의 목록을 검토합니다.
6. 주목할 만한 이벤트를 찾았으면 이벤트 로그 온라인 도움말 링크를 선택하여 추가 정보 및 문제 해결 절차를 표시합니다.
7. 추가 문제 해결을 수행하려면 주목할 만한 이벤트의 날짜와 시간을 확인한 다음, 2단계에서 설명한 대로 작업 로그를 검토하여 사용자 프로필 서비스가 오류 또는 경고 이벤트 발생 시 수행한 작업에 대한 세부 정보를 확인합니다.

>[!NOTE]
>사용자 프로필 서비스 이벤트 1530 “다른 애플리케이션 또는 서비스에서 레지스트리 파일을 아직 사용하고 있음을 Windows에서 감지함”을 무시해도 됩니다.

## <a name="step-2-view-the-operational-log-for-the-user-profile-service"></a>2단계: 사용자 프로필 서비스에 대한 작업 로그 보기

애플리케이션 로그만 사용하여 문제를 해결할 수 없는 경우 다음 절차를 사용하여 작업 로그에서 사용자 프로필 서비스 이벤트를 확인합니다. 이 로그는 서비스의 내부 작업 중 일부를 표시하며, 프로필 로드 또는 언로드 프로세스에서 문제가 발생한 위치를 파악하는 데 도움이 됩니다.

Windows 애플리케이션 로그와 사용자 프로필 서비스 작업 로그는 둘다 모든 Windows 설치에서 기본적으로 사용하도록 설정됩니다.

사용자 프로필 서비스에 대한 작업 로그를 보는 방법은 다음과 같습니다.

1. 이벤트 뷰어 콘솔 트리에서 **애플리케이션 및 서비스 로그**, **Microsoft**, **Windows**, **사용자 프로필 서비스**, **작업**으로 차례로 이동합니다.
2. 애플리케이션 로그에 기록된 오류 또는 경고 이벤트 시간 전후에 발생한 이벤트를 검사합니다.

## <a name="step-3-enable-and-view-analytic-and-debug-logs"></a>3단계: 분석 및 디버그 로그의 사용 설정 및 보기

작업 로그에서 제공하는 것보다 자세한 정보가 필요한 경우 영향을 받는 컴퓨터에서 분석 및 디버그 로그를 사용하도록 설정할 수 있습니다. 이 로깅 수준은 훨씬 더 세밀하며, 문제 해결을 시도할 때 외에는 사용하지 않도록 설정해야 합니다.

분석 및 디버그 로그를 사용하도록 설정하고 확인하는 방법은 다음과 같습니다.

1. 이벤트 뷰어의 **작업** 창에서 **보기**를 선택한 다음, **분석 및 디버그 로그 표시**를 선택합니다.
2. **애플리케이션 및 서비스 로그**, **Microsoft**, **Windows**, **사용자 프로필 서비스**, **진단**으로 차례로 이동합니다.
3. **로그 사용**을 선택한 다음, **예**를 선택합니다. 이렇게 하면 로깅을 시작하는 진단 로그를 사용할 수 있습니다.
4. 훨씬 더 자세한 정보가 필요한 경우 [4단계: 추적 만들기 및 디코딩](#step-4-creating-and-decoding-a-trace)에서 추적 로그를 만드는 방법에 대한 자세한 내용을 확인하세요.
5. 문제 해결이 끝나면 **진단** 로그로 이동하여 **로그 사용 안 함**을 선택하고 **보기**를 선택한 다음, **분석 및 디버그 로그 표시** 확인란의 선택을 취소하여 분석 및 디버그 로깅을 숨깁니다.

## <a name="step-4-creating-and-decoding-a-trace"></a>4단계: 추적 만들기 및 디코딩

이벤트를 사용하여 문제를 해결할 수 없는 경우 문제를 재현할 때 추적 로그(ETL 파일)를 만든 다음, Microsoft 기호 서버에서 공용 기호를 사용하여 해당 로그를 디코딩할 수 있습니다. 추적 로그는 사용자 프로필 서비스가 수행하는 작업에 대한 매우 구체적인 정보를 제공하고 오류가 발생한 위치를 파악하는 데 도움이 됩니다.

ETL 추적을 사용할 때 가장 좋은 전략은 가장 작은 로그를 먼저 캡처하는 것입니다. 로그가 디코딩되면 로그에서 오류를 검색합니다.

사용자 프로필 서비스에 대한 추적을 만들고 디코딩하는 방법은 다음과 같습니다.

1. 로컬 관리자 그룹의 구성원인 계정을 사용하여 사용자가 문제를 경험한 컴퓨터에 로그온합니다.
2. 관리자 권한 명령 프롬프트에서 다음 명령을 입력합니다. 여기서 *\<Path\>* 는 이전에 만든 로컬 폴더의 경로(예: C:\\logs)입니다.
        
    ```PowerShell
    logman create trace -n RUP -o <Path>\RUP.etl -ets
    logman update RUP -p {eb7428f5-ab1f-4322-a4cc-1f1a9b2c5e98} 0x7FFFFFFF 0x7 -ets
    ```
3. 시작 화면에서 사용자 이름을 선택한 다음, 관리자를 로그오프하지 않도록 주의하면서 **계정 전환**을 선택합니다. 원격 데스크톱을 사용하는 경우 관리자 세션을 닫아 사용자 세션을 설정합니다.
4. 문제를 재현합니다. 문제를 재현하는 절차는 일반적으로 문제가 발생한 사용자로 로그인하거나, 사용자를 로그오프하거나, 둘다를 수행하는 것입니다.
5. 문제를 재현한 후 로컬 관리자 권한으로 다시 로그인합니다.
6. 관리자 권한 명령 프롬프트에서 다음 명령을 실행하여 ETL 파일에 로그를 저장합니다.
  
    ```PowerShell
    logman stop -n RUP -ets
    ```
7. 다음 명령을 입력하여 ETL 파일을 현재 디렉터리(홈 폴더 또는 %WINDIR%\\System32 폴더)의 사람이 읽을 수 있는 파일로 내보냅니다.
    
    ```PowerShell
    Tracerpt <path>\RUP.etl
    ```
8. **Summary.txt** 파일 및 **Dumpfile.xml** 파일을 엽니다. Microsoft Excel에서 열면 로그의 전체 세부 정보를 더 쉽게 볼 수 있습니다. **실패** 또는 **실패함**을 포함한 이벤트를 찾습니다. **알 수 없음** 이벤트 이름을 포함한 줄은 무시해도 됩니다.

## <a name="more-information"></a>자세한 정보

* [로밍 사용자 프로필 배포](deploy-roaming-user-profiles.md)