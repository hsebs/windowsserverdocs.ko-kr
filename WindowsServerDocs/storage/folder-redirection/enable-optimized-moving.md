---
title: 리디렉션된 폴더의 최적화된 이동 사용
description: 리디렉션된 폴더를 새 파일 공유로 최적화된 이동을 수행하는 방법입니다.
ms.prod: windows-server
ms.topic: article
author: JasonGerend
ms.author: jgerend
ms.technology: storage
ms.date: 09/10/2018
ms.localizationpriority: medium
ms.openlocfilehash: edf714bc0d6b39dbe7c5e800e953d7820fe9abc5
ms.sourcegitcommit: 3a3d62f938322849f81ee9ec01186b3e7ab90fe0
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/23/2020
ms.locfileid: "75352606"
---
# <a name="enable-optimized-moves-of-redirected-folders"></a>리디렉션된 폴더의 최적화된 이동 사용

>적용 대상: Windows 10, Windows 8, Windows 8.1, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012, Windows Server(반기 채널)

이 항목에서는 리디렉션된 폴더(폴더 리디렉션)를 새 파일 공유로 최적화된 이동을 수행하는 방법에 대해 설명합니다. 이 정책 설정을 사용하도록 설정하면 관리자가 리디렉션된 폴더를 호스팅하는 파일 공유를 이동하고 그룹 정책에서 리디렉션된 폴더의 대상 경로를 업데이트할 때 캐시된 콘텐츠는 지연이나 사용자에 대한 잠재적인 데이터 손실 없이 로컬 오프라인 파일 캐시에서 이름이 간단히 변경됩니다.

이전에는 관리자가 그룹 정책에서 리디렉션된 폴더의 대상 경로를 변경하고, 영향을 받는 사용자의 다음 로그인 시 클라이언트 컴퓨터가 파일을 복사하여 지연된 로그인이 발생했습니다. 또는 관리자가 파일 공유를 이동하고 그룹 정책에서 리디렉션된 폴더의 대상 경로를 업데이트했습니다. 그러나 이동 시작과 이동 후의 첫 번째 동기화 사이에 클라이언트 컴퓨터에서 로컬로 수행되는 모든 변경 내용이 손실되었습니다.

## <a name="prerequisites"></a>필수 구성 요소

최적화된 이동의 요구 사항은 다음과 같습니다.

- 폴더 리디렉션이 설정되어 있어야 합니다. 자세한 내용은 [오프라인 파일을 사용한 폴더 리디렉션 배포](deploy-folder-redirection.md)를 참조하세요.
- 클라이언트 컴퓨터는 Windows 10, Windows 8.1, Windows 8, Windows Server 2019, Windows Server 2016, Windows Server 2012 R2, Windows Server 2012 또는 Windows Server(반기 채널)를 실행해야 합니다.

## <a name="step-1-enable-optimized-move-in-group-policy"></a>1단계: 그룹 정책에서 최적화된 이동 사용

폴더 리디렉션 데이터의 재배치를 최적화하려면 그룹 정책를 사용하여 적절한 GPO(그룹 정책 개체)에 대해 **폴더 리디렉션 서버 경로 변경 시 오프라인 파일 캐시에서 최적화된 콘텐츠 이동 사용** 정책 설정을 활성화합니다. 이 정책 설정을 **사용 안 함** 또는 **구성되지 않음**으로 구성하면 클라이언트가 모든 폴더 리디렉션 콘텐츠를 새 위치에 복사한 다음, 서버 경로가 변경되면 이전 위치에서 콘텐츠를 삭제합니다.

리디렉션된 폴더의 최적화된 이동을 사용하도록 설정하는 방법은 다음과 같습니다.

1. 그룹 정책 관리에서 폴더 리디렉션 설정(예: **폴더 리디렉션 및 로밍 사용자 프로필 설정**)에 대해 만든 GPO를 마우스 오른쪽 단추로 클릭한 다음, **편집**을 선택합니다.
2. **사용자 구성**에서 **정책**, **관리 템플릿**, **시스템**, **폴더 리디렉션**으로 이동합니다.
3. **폴더 리디렉션 서버 경로 변경 시 오프라인 파일 캐시에서 최적화된 콘텐츠 이동 사용**을 마우스 오른쪽 단추로 선택한 다음, **편집**을 선택합니다.
4. **사용**를 선택한 다음, **확인**을 선택합니다.

## <a name="step-2-relocate-the-file-share-for-redirected-folders"></a>2단계: 리디렉션된 폴더의 파일 공유 위치를 다시 배치합니다.

사용자의 리디렉션된 폴더를 포함하는 파일 공유를 이동할 때는 폴더의 위치가 올바르게 조정되도록 예방 조치를 취해야 합니다.

>[!IMPORTANT]
>사용자의 파일이 사용 중이거나 전체 파일 상태가 이동 시 유지되지 않는 경우 네트워크를 통해 파일을 복사할 때 성능이 저하되거나, 오프라인 파일에서 생성된 동기화가 충돌하거나 데이터 손실이 발생할 수 있습니다.

1. 리디렉션된 폴더를 호스팅하는 서버가 변경될 것임을 사용자에게 미리 알리고 다음 작업을 수행하도록 권장합니다.

      - 오프라인 파일 캐시의 콘텐츠를 동기화하고 충돌을 해결합니다.
      - 관리자 권한 명령 프롬프트를 열고 **GpUpdate /Target:User /Force**를 입력한 다음, 로그아웃했다가 다시 로그인하여 최신 그룹 정책 설정이 클라이언트 컴퓨터에 적용되도록 합니다.

        >[!NOTE]
        >기본적으로 클라이언트 컴퓨터는 90분 간격으로 그룹 정책을 업데이트하므로 클라이언트 컴퓨터가 업데이트된 정책을 받을 수 있는 충분한 시간을 허용하면 사용자에게 **GpUpdate** 사용을 요청할 필요가 없습니다.
2. 파일 공유의 파일이 사용되고 있지 않은지 확인하려면 서버에서 파일 공유를 제거합니다. 이렇게 하려면 서버 관리자의 파일 및 스토리지 서비스의 **공유** 페이지에서 적절한 파일 공유를 마우스 오른쪽 단추로 클릭한 다음, **제거**를 선택합니다.

    사용자는 이동이 완료될 때까지 오프라인 파일을 사용하여 오프라인으로 작업하고 그룹 정책에서 업데이트된 폴더 리디렉션 설정을 받게 됩니다.

3. 백업 권한이 있는 계정을 사용하여 백업 및 복원 유틸리티와 같은 파일 타임스탬프를 유지하는 방법을 사용하여 파일 공유의 콘텐츠를 새 위치로 이동합니다. **Robocopy** 명령을 사용하려면 관리자 권한 명령 프롬프트를 연 다음, 다음 명령을 입력합니다. 여기서 ```<Source>```는 파일 공유의 현재 위치이고 ```<Destination>```은 새 위치입니다.

    ```PowerShell
    Robocopy /B <Source> <Destination> /Copyall /MIR /EFSRAW
    ```

    >[!NOTE]
    >**Xcopy** 명령은 모든 파일 상태를 유지하지는 않습니다.
4. 위치를 다시 지정할 리디렉션된 각 폴더의 대상 폴더 위치를 업데이트하여 폴더 리디렉션 정책 설정을 편집합니다. 자세한 내용은 [오프라인 파일을 사용한 폴더 리디렉션 배포](deploy-folder-redirection.md)의 4단계를 참조하세요.
5. 사용자에게 리디렉션된 폴더를 호스트하는 서버가 변경되었으며, **GpUpdate /Target:User /Force** 명령을 사용한 다음, 로그아웃한 후 다시 로그인하여 업데이트된 구성을 가져오고 적절한 파일 동기화를 다시 시작해야 함을 알립니다.

    사용자는 한 번 이상 모든 머신에 로그온하여 각 오프라인 파일 캐시에서 데이터가 올바르게 재배치되도록 해야 합니다.

## <a name="more-information"></a>자세한 정보

* [오프라인 파일을 사용한 폴더 리디렉션 배포](deploy-folder-redirection.md)
* [로밍 사용자 프로필 배포](deploy-roaming-user-profiles.md)
* [폴더 리디렉션, 오프라인 파일 및 로밍 사용자 프로필 개요](folder-redirection-rup-overview.md)