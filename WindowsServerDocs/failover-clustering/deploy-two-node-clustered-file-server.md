---
title: 2 개 노드 클러스터 된 파일 서버 배포
description: 이 문서에서는 2 개 노드 파일 서버 클러스터를 만드는 방법에 대해 설명 합니다.
ms.prod: windows-server
manager: eldenc
ms.technology: failover-clustering
ms.topic: article
author: johnmarlin-msft
ms.author: johnmar
ms.date: 02/01/2019
ms.openlocfilehash: 6b92ab965e94bec5bc7cfa5d068bff601d2f8f6b
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/08/2020
ms.locfileid: "80827886"
---
# <a name="deploying-a-two-node-clustered-file-server"></a>2 개 노드 클러스터 된 파일 서버 배포

> 적용 대상: Windows Server 2019, Windows Server 2016

장애 조치(failover) 클러스터는 응용 프로그램 및 서비스의 가용성을 높이기 위해 함께 작동하는 독립적인 컴퓨터 그룹입니다. 클러스터된 서버(노드라고 함)는 실제 케이블 및 소프트웨어로 연결됩니다. 클러스터 노드 중 하나가 실패하면 다른 노드에서 서비스(장애 조치로 알려진 프로세스)를 제공하기 시작합니다. 사용자는 최소한의 서비스 중단을 경험 합니다.

이 가이드에서는 두 개의 노드가 있는 범용 파일 서버 장애 조치 (failover) 클러스터를 설치 하 고 구성 하는 단계에 대해 설명 합니다. 이 가이드의 구성을 만들면 장애 조치 (failover) 클러스터에 대해 알아보고 Windows Server 2019 또는 Windows Server 2016의 장애 조치 (Failover) 클러스터 관리 스냅인 인터페이스를 익힐 수 있습니다.

## <a name="overview-for-a-two-node-file-server-cluster"></a>2 개 노드 파일 서버 클러스터에 대 한 개요

장애 조치 (failover) 클러스터의 서버는 파일 서버, Hyper-v 서버 또는 데이터베이스 서버의 역할을 비롯 한 다양 한 역할을 수행할 수 있으며, 다양 한 서비스 및 응용 프로그램에 대 한 고가용성을 제공할 수 있습니다. 이 가이드에서는 2 개 노드 파일 서버 클러스터를 구성 하는 방법을 설명 합니다.

일반적으로 장애 조치 (failover) 클러스터에는 클러스터의 모든 서버에 물리적으로 연결 된 저장소 단위가 포함 되어 있습니다. 단, 저장소의 지정 된 볼륨은 한 번에 하나의 서버 에서만 액세스할 수 있습니다. 다음 다이어그램에서는 저장소 장치에 연결 된 2 노드 장애 조치 (failover) 클러스터를 보여 줍니다.

![2 개 노드 클러스터](media/Cluster-File-Server/Cluster-FS-Overview.png)

클러스터의 노드에 노출 된 저장소 볼륨 또는 Lun (논리 단위 번호)은 다른 클러스터의 서버를 포함 하 여 다른 서버에 노출 되 면 안 됩니다. 다음 다이어그램에서는이를 보여 줍니다.

![저장소의 Lun](media/Cluster-File-Server/Cluster-FS-LUNs.png)

서버를 최대한 사용할 수 있도록 하려면 서버 관리에 대 한 모범 사례를 따르는 것이 중요 합니다. 예를 들어 서버의 물리적 환경을 신중 하 게 관리 하 고, 완전히 구현 하기 전에 소프트웨어 변경을 테스트 하 고, 모든 클러스터 된 서버의 소프트웨어 업데이트 및 구성 변경 내용을 신중 하 게 추적 하는 것이 중요 합니다.

다음 시나리오에서는 파일 서버 장애 조치 (failover) 클러스터를 구성 하는 방법을 설명 합니다. 공유 되는 파일은 클러스터 저장소에 있으며 클러스터 된 서버는 이러한 파일을 공유 하는 파일 서버 역할을 할 수 있습니다.

## <a name="shared-folders-in-a-failover-cluster"></a>장애 조치 (failover) 클러스터의 공유 폴더

다음 목록에서는 장애 조치 (failover) 클러스터링에 통합 된 공유 폴더 구성 기능에 대해 설명 합니다.

- 표시는 클러스터 된 공유 폴더만으로 한정 됩니다 (클러스터 되지 않은 공유 폴더와 혼합 되지 않음). 사용자가 클러스터 된 파일 서버의 경로를 지정 하 여 공유 폴더를 볼 때 특정 파일 서버 역할의 일부인 공유 폴더만 표시 됩니다. 클러스터 되지 않은 공유 폴더를 제외 하 고 클러스터의 노드에 있는 별도의 파일 서버 역할의 일부를 공유 합니다.

- 액세스 기반 열거: 액세스 기반 열거를 사용 하 여 사용자의 보기에서 지정 된 폴더를 숨길 수 있습니다. 사용자가 폴더를 볼 수 있지만 어떤 항목에도 액세스할 수 없도록 하는 대신 폴더를 전혀 볼 수 없도록 선택할 수 있습니다. 클러스터 되지 않은 공유 폴더와 동일한 방법으로 클러스터 된 공유 폴더에 대 한 액세스 기반 열거를 구성할 수 있습니다.

- 오프 라인 액세스: 비클러스터형 공유 폴더와 동일한 방법으로 클러스터 된 공유 폴더에 대 한 오프 라인 액세스 (캐싱)를 구성할 수 있습니다.

- 클러스터 된 디스크는 항상 클러스터의 일부로 인식 됩니다. 즉, 장애 조치 (failover) 클러스터 인터페이스, Windows 탐색기 또는 공유 및 저장소 관리 스냅인을 사용 하는 경우 Windows에서 디스크가 클러스터 저장소에 있는 것으로 지정 되었는지 여부를 인식 합니다. 이러한 디스크가 장애 조치 (Failover) 클러스터 관리에서 클러스터 된 파일 서버의 일부로 이미 구성 된 경우 앞에서 언급 한 인터페이스를 사용 하 여 디스크에 공유를 만들 수 있습니다. 이러한 디스크가 클러스터 된 파일 서버의 일부로 구성 되지 않은 경우 실수로 공유를 만들 수 없습니다. 대신, 디스크를 공유 하려면 먼저 클러스터 된 파일 서버의 일부로 디스크를 구성 해야 함을 나타냅니다.

- 네트워크 파일 시스템용 서비스 통합: Windows Server의 파일 서버 역할에는 NFS (네트워크 파일 시스템) 용 서비스 라는 선택적 역할 서비스가 포함 되어 있습니다. 역할 서비스를 설치 하 고 NFS 용 서비스를 사용 하 여 공유 폴더를 구성 하면 UNIX 기반 클라이언트를 지 원하는 클러스터 된 파일 서버를 만들 수 있습니다.

## <a name="requirements-for-a-two-node-failover-cluster"></a>2 개 노드 장애 조치 (failover) 클러스터에 대 한 요구 사항

Microsoft에서 공식적으로 지원 되는 솔루션으로 간주 되는 Windows Server 2016 또는 Windows Server 2019의 장애 조치 (failover) 클러스터의 경우 솔루션이 다음 조건을 충족 해야 합니다.

- 모든 하드웨어 및 소프트웨어 구성 요소는 적절한 로고에 대한 자격을 충족해야 합니다. Windows Server 2016의 경우 "Windows Server 2016 인증" 로고가 여기에 해당 합니다. Windows Server 2019의 경우 "Windows Server 2019 인증" 로고가 여기에 해당 합니다. 인증 된 하드웨어 및 소프트웨어 시스템에 대 한 자세한 내용은 Microsoft [Windows Server 카탈로그](https://www.windowsservercatalog.com/default.aspx) 사이트를 참조 하십시오.

- 완전히 구성 된 솔루션 (서버, 네트워크 및 저장소)은 장애 조치 (failover) 클러스터 스냅인의 일부인 유효성 검사 마법사의 모든 테스트를 통과 해야 합니다.

2 개 노드 장애 조치 (failover) 클러스터에는 다음이 필요 합니다.

- **서버:** 동일 하거나 유사한 구성 요소가 있는 일치 하는 컴퓨터를 사용 하는 것이 좋습니다.  2 개 노드 장애 조치 (failover) 클러스터에 대 한 서버는 동일한 버전의 Windows Server를 실행 해야 합니다. 동일한 소프트웨어 업데이트 (패치)도 있어야 합니다.

- **네트워크 어댑터 및 케이블:** 장애 조치 (failover) 클러스터 솔루션의 다른 구성 요소와 같은 네트워크 하드웨어는 Windows Server 2016 또는 Windows Server 2019과 호환 되어야 합니다. ISCSI를 사용 하는 경우 네트워크 어댑터는 네트워크 통신 또는 iSCSI 중 하나에만 사용 해야 합니다. 클러스터 노드를 연결하는 네트워크 인프라에는 단일 실패 지점이 없도록 해야 합니다. 이를 수행 하는 방법에는 여러 가지가 있습니다. 여러 개별 네트워크를 통해 클러스터 노드를 연결할 수 있습니다. 또는 클러스터 노드를 조합된 네트워크 어댑터, 중복 스위치, 중복 라우터 또는 단일 실패 지점을 제거하는 유사한 하드웨어로 구성된 하나의 네트워크에 연결할 수 있습니다.

   > [!NOTE]
   > 클러스터 노드가 단일 네트워크에 연결 된 경우 네트워크는 구성 유효성 검사 마법사에서 중복성 요구 사항을 통과 합니다.  그러나이 보고서에는 네트워크에 단일 실패 지점이 없어야 한다는 경고가 포함 됩니다.

- **저장소에 대 한 장치 컨트롤러 또는 적절 한 어댑터:**
    - **직렬 연결 SCSI 또는 파이버 채널:** 직렬 연결 SCSI 또는 파이버 채널를 사용 하는 경우 모든 클러스터형 서버에서 저장소 스택의 모든 구성 요소가 동일 해야 합니다. MPIO (다중 경로 i/o) 소프트웨어와 DSM (장치별 모듈) 소프트웨어 구성 요소는 동일 해야 합니다.  클러스터 저장소에 연결된 HBA(호스트 버스 어댑터), HBA 드라이버, HBA 펌웨어 등의 대용량 저장 장치 컨트롤러가 동일한 것이 좋습니다. 유사하지 않은 HBA를 사용하는 경우 해당 저장소 공급업체에서 지원 또는 권장하는 구성을 따르고 있는지 확인해야 합니다.
    - **iSCSI:** ISCSI를 사용 하는 경우 각 클러스터 된 서버에는 ISCSI 저장소 전용으로 사용 되는 하나 이상의 네트워크 어댑터나 호스트 버스 어댑터가 있어야 합니다. ISCSI에 사용 하는 네트워크는 네트워크 통신에 사용할 수 없습니다. 클러스터형 모든 서버에서 iSCSI 저장소 대상에 연결하는 데 사용하는 네트워크 어댑터가 동일해야 하며 Gigabit Ethernet 이상을 사용하는 것이 좋습니다.  

- **저장소:** Windows Server 2016 또는 Windows Server 2019에 대해 인증 된 공유 저장소를 사용 해야 합니다.
  
    2 개 노드 장애 조치 (failover) 클러스터의 경우 쿼럼에 감시 디스크를 사용 하는 경우 저장소에는 두 개 이상의 개별 볼륨 (Lun)이 포함 되어야 합니다. 미러링 모니터 디스크는 클러스터 구성 데이터베이스의 복사본을 보유 하도록 지정 된 클러스터 저장소의 디스크입니다. 이 두 노드 클러스터 예제에서 쿼럼 구성은 노드 및 디스크 과반수가 됩니다. 노드 및 디스크 과반수는 노드 및 감시 디스크가 각각 클러스터 구성의 복사본을 포함 하 고 있으며, 이러한 복사본 중 과반수 (3 개 중 2 개)를 사용할 수 있는 경우에만 클러스터에 쿼럼이 있음을 의미 합니다. 다른 볼륨 (LUN)에는 사용자에 게 공유 되는 파일이 포함 됩니다.

    다음과 같은 저장소 요구 사항이 있습니다.

    - 장애 조치 클러스터링에 포함된 기본 디스크 지원을 사용하려면 동적 디스크가 아닌 기본 디스크를 사용합니다.
    - 파티션을 NTFS로 포맷 하는 것이 좋습니다 (감시 디스크의 경우 파티션은 NTFS 여야 함).
    - 디스크의 파티션 형식으로는 MBR(마스터 부트 레코드) 또는 GPT(GUID 파티션 테이블) 중 하나를 사용할 수 있습니다.
    - 저장소는 특정 SCSI 명령에 올바르게 응답 해야 하며, 저장소는 SCSI 기본 명령-3 (SPC-3) 이라는 표준을 따라야 합니다. 특히, 저장소는 SPC-3 표준에 지정 된 대로 영구 예약을 지원 해야 합니다. 
    -  저장소에 사용 되는 미니 포트 드라이버는 Microsoft Storport 저장소 드라이버에서 작동 해야 합니다.

## <a name="deploying-storage-area-networks-with-failover-clusters"></a>장애 조치(failover) 클러스터로 저장 영역 네트워크 배포

장애 조치 (failover) 클러스터를 사용 하 여 SAN (저장소 영역 네트워크)을 배포 하는 경우 다음 지침을 따라야 합니다.

- **저장소 인증 확인:** [Windows Server 카탈로그](https://www.windowsservercatalog.com/default.aspx) 사이트를 사용 하 여 드라이버, 펌웨어 및 소프트웨어를 포함 하 여 공급 업체의 저장소가 windows server 2016 또는 windows server 2019에 대해 인증 되었는지 확인 합니다.

- **저장소 장치 분리, 장치당 클러스터 하나:** 서로 다른 클러스터의 서버가 같은 저장 장치에 액세스할 수 없어야 합니다. 대부분의 경우 하나의 클러스터 서버 집합에 사용 되는 LUN은 LUN 마스킹 또는 영역 지정을 통해 다른 모든 서버에서 격리 되어야 합니다.

- **다중 경로 i/o 소프트웨어 사용을 고려 합니다.** 항상 사용 가능한 저장소 패브릭에서 다중 경로 i/o 소프트웨어를 사용 하 여 여러 호스트 버스 어댑터를 사용 하 여 장애 조치 (failover) 클러스터를 배포할 수 있습니다. 이를 통해 최고 수준의 중복성 및 가용성이 제공됩니다. 다중 경로 솔루션은 Microsoft MPIO (다중 경로 i/o)를 기반으로 해야 합니다. 저장소 하드웨어 공급 업체는 하드웨어에 대 한 MPIO DSM (장치별 모듈)을 제공할 수 있습니다. 그러나 Windows Server 2016 및 Windows Server 2019에는 운영 체제의 일부로 하나 이상의 Dsm 포함 되어 있습니다.

## <a name="network-infrastructure-and-domain-account-requirements"></a>네트워크 인프라 및 도메인 계정 요구 사항

2 개 노드 장애 조치 (failover) 클러스터와 다음 도메인 권한이 있는 관리 계정에는 다음 네트워크 인프라가 필요 합니다.

- **네트워크 설정 및 IP 주소:** 네트워크에 동일한 네트워크 어댑터를 사용 하는 경우 해당 어댑터에서 동일한 통신 설정 (예: 속도, 이중 모드, 흐름 제어 및 미디어 유형)을 사용 합니다. 또한 네트워크 어댑터와 연결된 스위치 간의 설정을 비교하고 충돌하는 설정이 없는지 확인합니다.

    나머지 네트워크 인프라로 라우팅되지 않는 프라이빗 네트워크가 있는 경우 각 프라이빗 네트워크에서 고유한 서브넷을 사용하는지 확인합니다. 이는 각 네트워크 어댑터에 고유 IP 주소를 부여한 경우에도 필요합니다. 예를 들어 본사에 하나의 실제 네트워크를 사용하는 클러스터 노드가 있고, 지점에 별도의 실제 네트워크를 사용하는 다른 노드가 있는 경우, 각 어댑터에 고유 IP 주소를 부여한 경우에도 두 네트워크 모두에 10.0.0.0/24를 지정하지 마세요.

    네트워크 어댑터에 대 한 자세한 내용은이 가이드의 앞부분에 나오는 2 노드 장애 조치 (failover) 클러스터에 대 한 하드웨어 요구 사항을 참조 하세요.

- **DNS:** 클러스터의 서버는 이름 확인을 위해 DNS (Domain Name System)를 사용 해야 합니다. DNS 동적 업데이트 프로토콜을 사용할 수 있습니다.

- **도메인 역할:** 클러스터의 모든 서버는 동일한 Active Directory 도메인에 있어야 합니다. 모범 사례로서, 모든 클러스터된 서버에는 같은 도메인 역할(구성원 서버 또는 도메인 컨트롤러)이 있어야 합니다. 권장 역할은 구성원 서버입니다.

- **도메인 컨트롤러:** 클러스터 된 서버를 구성원 서버로 사용할 것을 권장 합니다. 이 경우 장애 조치 (failover) 클러스터를 포함 하는 도메인의 도메인 컨트롤러 역할을 하는 추가 서버가 필요 합니다.

- **클라이언트:** 테스트에 필요한 경우 하나 이상의 네트워크로 연결 된 클라이언트를 만든 장애 조치 (failover) 클러스터에 연결 하 고 클러스터 된 파일 서버를 클러스터 노드 간에 이동 하거나 장애 조치할 때 클라이언트에 대 한 영향을 관찰할 수 있습니다.

- **클러스터 관리를 위한 계정:** 클러스터를 처음으로 만들거나 해당 클러스터에 서버를 추가 하는 경우 해당 클러스터의 모든 서버에 대 한 관리자 권한 및 사용 권한이 있는 계정으로 도메인에 로그온 해야 합니다. 계정이 Domain Admins 계정일 필요는 없지만 각 클러스터된 서버에서 Administrators 그룹에 속한 Domain Users 계정일 수는 있습니다. 또한 계정이 Domain Admins 계정이 아닌 경우에는 계정 (또는 계정이 구성원으로 속한 그룹)에 상주할 도메인 OU (조직 구성 단위)의 **컴퓨터 개체 만들기** 및 **모든 속성 읽기** 권한이 부여 되어야 합니다.

## <a name="steps-for-installing-a-two-node-file-server-cluster"></a>2 개 노드 파일 서버 클러스터를 설치 하는 단계

2 노드 파일 서버 장애 조치 (failover) 클러스터를 설치 하려면 다음 단계를 완료 해야 합니다.

1 단계: 네트워크 및 저장소에 클러스터 서버 연결

2 단계: 장애 조치 (failover) 클러스터 기능 설치

3 단계: 클러스터 구성 유효성 검사

4 단계: 클러스터 만들기

클러스터 노드를 이미 설치 했 고 파일 서버 장애 조치 (failover) 클러스터를 구성 하려는 경우이 가이드의 뒷부분에 나오는 2 노드 파일 서버 클러스터를 구성 하는 단계를 참조 하세요.

### <a name="step-1-connect-the-cluster-servers-to-the-networks-and-storage"></a>1 단계: 네트워크 및 저장소에 클러스터 서버 연결

장애 조치 (failover) 클러스터 네트워크의 경우 단일 실패 지점이 발생 하지 않도록 합니다. 이를 수행 하는 방법에는 여러 가지가 있습니다. 여러 개별 네트워크를 통해 클러스터 노드를 연결할 수 있습니다. 또는 단일 실패 지점이 제거 되는 구성 된 네트워크 어댑터, 중복 스위치, 중복 라우터 또는 유사한 하드웨어로 구성 된 하나의 네트워크를 사용 하 여 클러스터 노드를 연결할 수 있습니다. iSCSI에 네트워크를 사용 하는 경우 다른 네트워크 외에도이 네트워크를 만들어야 합니다.

2 개 노드 파일 서버 클러스터의 경우 서버를 클러스터 저장소에 연결 하는 경우 두 개 이상의 볼륨 (Lun)을 노출 해야 합니다. 구성에 대 한 철저 한 테스트를 위해 필요에 따라 추가 볼륨을 노출할 수 있습니다. 클러스터에 없는 서버에 클러스터 된 볼륨을 노출 하지 마십시오.

#### <a name="to-connect-the-cluster-servers-to-the-networks-and-storage"></a>클러스터 서버를 네트워크 및 저장소에 연결 하려면

1. 이 가이드의 앞부분에 나오는 2 노드 장애 조치 (failover) 클러스터에 대 한 하드웨어 요구 사항 및 2 노드 장애 조치 (failover) 클러스터에 대 한 도메인 계정 요구 사항에서 네트워크에 대 한 세부 정보를 검토 합니다.

2. 클러스터의 서버에서 사용할 네트워크를 연결하고 구성합니다.

3. 테스트 구성에 클라이언트 또는 클러스터 되지 않은 도메인 컨트롤러가 포함 된 경우 이러한 컴퓨터가 하나 이상의 네트워크를 통해 클러스터 된 서버에 연결할 수 있는지 확인 합니다.

4. 서버를 실제로 저장소에 연결하는 방법은 제조업체의 지침을 따릅니다.

5. 클러스터에서 사용할 디스크(LUN)가 클러스터할 서버에만 노출되는지 확인합니다. 다음 인터페이스 중 하나를 사용 하 여 디스크 또는 Lun을 노출할 수 있습니다.

    - 저장소 제조업체가 제공한 인터페이스

    - ISCSI를 사용 하는 경우 적절 한 iSCSI 인터페이스를 사용 합니다.

6. 디스크의 형식이 나 기능을 제어 하는 소프트웨어를 구매한 경우, Windows Server에서 해당 소프트웨어를 사용 하는 방법에 대 한 공급 업체의 지침을 따르세요.

7. 클러스터링 할 서버 중 하나에서 시작, 관리 도구, 컴퓨터 관리, 디스크 관리를 차례로 클릭 합니다. 사용자 계정 컨트롤 대화 상자가 나타나면 표시 되는 작업이 원하는 작업 인지 확인 한 다음 계속을 클릭 합니다. 디스크 관리에서 클러스터 디스크가 표시 되는지 확인 합니다.

8. Windows 인터페이스를 사용하여 디스크 형식을 제어하는 경우 2TB가 넘는 저장소 볼륨을 원한다면 해당 디스크를 GPT(GUID 파티션 테이블)라는 파티션 형식으로 변환합니다. 이렇게 하려면 디스크의 모든 데이터를 백업 하 고 디스크의 모든 볼륨을 삭제 한 다음 디스크 관리에서 디스크 (파티션이 아님)를 마우스 오른쪽 단추로 클릭 하 고 GPT 디스크로 변환을 클릭 합니다.  볼륨이 2TB보다 작은 경우에는 GPT를 사용하는 대신 MBR(마스터 부트 레코드)이라는 파티션 형식을 사용할 수 있습니다.

9. 표시된 모든 볼륨 또는 LUN의 형식을 확인합니다. 포맷에는 NTFS를 사용 하는 것이 좋습니다 (감시 디스크의 경우 NTFS를 사용 해야 함).

### <a name="step-2-install-the-file-server-role-and-failover-cluster-feature"></a>2 단계: 파일 서버 역할 및 장애 조치 (failover) 클러스터 기능 설치

이 단계에서는 파일 서버 역할 및 장애 조치 (failover) 클러스터 기능이 설치 됩니다. 두 서버 모두 Windows Server 2016 또는 Windows Server 2019 중 하나를 실행 해야 합니다.

#### <a name="using-server-manager"></a>서버 관리자 사용

1. **서버 관리자** 를 열고 **관리** 드롭다운 아래에서 **역할 및 기능 추가**를 선택 합니다.

   ![기능 추가](media/Cluster-File-Server/Cluster-FS-Add-Feature.png)

2. **시작 하기 전에** 창이 열리면 **다음**을 선택 합니다.

3. **설치 유형**에서 **역할 기반 또는 기능 기반 설치** 를 선택 하 고 **다음**을 선택 합니다.

4. **서버 풀에서 서버 선택** 이 선택 되어 있는지 확인 하 고, 컴퓨터의 이름을 강조 표시 하 고, **다음**을 선택 합니다.

5. 서버 역할의 경우 역할 목록에서 **파일 서비스**를 열고 **파일 서버**를 선택한 후 **다음**을 선택 합니다.

   ![Add Role](media/Cluster-File-Server/Cluster-FS-Add-FS-Role-1.png)

6. 기능의 경우 기능 목록에서 **장애 조치 (Failover) 클러스터링**을 선택 합니다.  팝업 대화 상자에 관리 도구가 설치 되는 것이 표시 됩니다.  선택한 모든 것을 유지 하 고 **기능 추가** 및 **다음**을 선택 합니다.

   ![기능 추가](media/Cluster-File-Server/Cluster-FS-Add-WSFC-1.png)

7. 확인 페이지에서 설치를 선택 합니다.

8. 설치가 완료 되 면 컴퓨터를 다시 시작 합니다.

9. 두 번째 컴퓨터에서 단계를 반복 합니다.

#### <a name="using-powershell"></a>PowerShell 사용

1. 시작 단추를 마우스 오른쪽 단추로 클릭 한 다음 **Windows powershell (관리자)** 을 선택 하 여 관리 PowerShell 세션을 엽니다.
2. 파일 서버 역할을 설치 하려면 다음 명령을 실행 합니다.

    ```PowerShell
    Install-WindowsFeature -Name FS-FileServer
    ```

3. 장애 조치 (Failover) 클러스터링 기능 및 해당 관리 도구를 설치 하려면 명령을 실행 합니다.

    ```PowerShell
    Install-WindowsFeature -Name Failover-Clustering -IncludeManagementTools
    ```

4. 완료 되 면 명령을 사용 하 여 설치 되었는지 확인할 수 있습니다.

    ```PowerShell
    Get-WindowsFeature -Name FS-FileServer
    Get-WindowsFeature -Name Failover-Clustering
    ```

5. 설치를 확인 한 후 다음 명령을 사용 하 여 컴퓨터를 다시 시작 합니다.

    ```PowerShell
    Restart-Computer
    ```

6. 두 번째 서버에서 단계를 반복 합니다.

### <a name="step-3-validate-the-cluster-configuration"></a>3 단계: 클러스터 구성 유효성 검사

클러스터를 만들기 전에 구성의 유효성을 검사 하는 것이 좋습니다. 유효성 검사는 서버, 네트워크 및 저장소의 구성이 장애 조치 (failover) 클러스터에 대 한 특정 요구 사항 집합을 충족 하는지 확인 하는 데 도움이 됩니다.

#### <a name="using-failover-cluster-manager"></a>장애 조치(Failover) 클러스터 관리자 사용

1. **서버 관리자**에서 **도구** 드롭다운을 선택 하 고 **장애 조치(Failover) 클러스터 관리자**를 선택 합니다.

2. **장애 조치(Failover) 클러스터 관리자**에서 **관리** 아래의 가운데 열로 이동 하 여 **구성 유효성 검사**를 선택 합니다.

3. **시작 하기 전에** 창이 열리면 **다음**을 선택 합니다.

4. **서버 또는 클러스터 선택** 창에서 클러스터 노드로 사용할 두 컴퓨터의 이름을 추가 합니다.  예를 들어 이름이 NODE1 및 노드 2 인 경우 이름을 입력 하 고 **추가**를 선택 합니다.  **찾아보기** 단추를 선택 하 여 이름에 대 한 Active Directory를 검색할 수도 있습니다.  둘 다 **선택한 서버**아래에 표시 되 면 **다음**을 선택 합니다.

5. **테스트 옵션** 창에서 **모든 테스트 실행 (권장)** 을 선택 하 고 **다음**을 선택 합니다.

6. **확인 페이지에서** 확인 하는 모든 테스트의 목록을 제공 합니다.  **다음** 을 선택 하면 테스트가 시작 됩니다.

7. 완료 되 면 테스트가 실행 된 후 **요약** 페이지가 나타납니다. 결과를 해석 하는 데 도움이 되는 도움말 항목을 보려면 **클러스터 유효성 검사 테스트에 대 한 자세한 정보**를 클릭 합니다.

8. 요약 페이지에서 보고서 보기를 클릭 하 고 테스트 결과를 읽습니다. 구성에서 필요한 변경을 수행 하 고 테스트를 다시 실행 합니다. <br>마법사를 닫은 후 테스트 결과를 보려면 *SystemRoot\Cluster\Reports\Validation Report date and time .html*을 참조 하십시오.

9. 마법사를 닫은 후 클러스터 유효성 검사에 대 한 도움말 항목을 보려면 장애 조치 (Failover) 클러스터 관리에서 도움말, 도움말 항목, 내용 탭을 차례로 클릭 하 고 장애 조치 (failover) 클러스터 도움말의 내용을 확장 한 다음 장애 조치 (Failover) 클러스터 구성 유효성 검사를 클릭 합니다.

#### <a name="using-powershell"></a>PowerShell 사용

1. 시작 단추를 마우스 오른쪽 단추로 클릭 한 다음 **Windows powershell (관리자)** 을 선택 하 여 관리 PowerShell 세션을 엽니다.

2. 장애 조치 (Failover) 클러스터링을 위해 컴퓨터의 유효성을 검사 하려면 (예: NODE1 및 노드 2로 컴퓨터 이름) 명령을 실행 합니다.

    ```PowerShell
    Test-Cluster -Node "NODE1","NODE2"
    ```
4. 마법사를 닫은 후 테스트 결과를 보려면 SystemRoot\Cluster\Reports\)에서 지정 된 파일을 확인 한 다음 구성에서 필요한 변경을 수행 하 고 테스트를 다시 실행 합니다.

자세한 내용은 [장애 조치 (Failover) 클러스터 구성 유효성 검사](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/jj134244(v=ws.11))를 참조 하세요.

### <a name="step-4-create-the-cluster"></a>4 단계: 클러스터 만들기

다음은 보유 하 고 있는 컴퓨터 및 구성에서 클러스터를 만드는 것입니다.

#### <a name="using-failover-cluster-manager"></a>장애 조치(Failover) 클러스터 관리자 사용

1. **서버 관리자**에서 **도구** 드롭다운을 선택 하 고 **장애 조치(Failover) 클러스터 관리자**를 선택 합니다.

2. **장애 조치(Failover) 클러스터 관리자**에서 **관리** 아래의 가운데 열로 이동 하 여 **클러스터 만들기**를 선택 합니다.

3. **시작 하기 전에** 창이 열리면 **다음**을 선택 합니다.

4. **서버 선택** 창에서 클러스터 노드로 사용할 두 컴퓨터의 이름을 추가 합니다.  예를 들어 이름이 NODE1 및 노드 2 인 경우 이름을 입력 하 고 **추가**를 선택 합니다.  **찾아보기** 단추를 선택 하 여 이름에 대 한 Active Directory를 검색할 수도 있습니다.  둘 다 **선택한 서버**아래에 표시 되 면 **다음**을 선택 합니다.

5. **클러스터 관리 액세스 지점** 창에서 사용할 클러스터의 이름을 입력 합니다.  을 사용 하 여 파일 공유에 연결 하는 데 사용 하는 이름이 아닙니다.  이는 단순히 클러스터를 관리 하기 위한 것입니다.

   > [!NOTE]
   > 고정 IP 주소를 사용 하는 경우 사용할 네트워크를 선택 하 고 클러스터 이름에 사용할 IP 주소를 입력 해야 합니다.  IP 주소에 DHCP를 사용 하는 경우 IP 주소가 자동으로 구성 됩니다.

6. **다음**을 선택 합니다.

7. **확인** 페이지에서 구성 된 항목을 확인 하 고 **다음** 을 선택 하 여 클러스터를 만듭니다.

8. **요약** 페이지에서 만든 구성을 제공 합니다.  보고서 보기를 선택 하 여 생성 된 보고서를 볼 수 있습니다.

#### <a name="using-powershell"></a>PowerShell 사용

1. 시작 단추를 마우스 오른쪽 단추로 클릭 한 다음 **Windows powershell (관리자)** 을 선택 하 여 관리 PowerShell 세션을 엽니다.

2. 고정 IP 주소를 사용 하는 경우 다음 명령을 실행 하 여 클러스터를 만듭니다.  예를 들어 컴퓨터 이름은 1, 2, 2, 2,, 클러스터의 이름은 클러스터가 되 고 IP 주소는 1.1.1.1 됩니다.

   ```PowerShell
    New-Cluster -Name CLUSTER -Node "NODE1","NODE2" -StaticAddress 1.1.1.1
   ```

3. IP 주소에 DHCP를 사용 하는 경우 다음 명령을 실행 하 여 클러스터를 만듭니다.  예를 들어 컴퓨터 이름은 NODE1 및 노드 2 이며 클러스터의 이름은 클러스터가 됩니다.

   ```PowerShell    
   New-Cluster -Name CLUSTER -Node "NODE1","NODE2"
   ```

### <a name="steps-for-configuring-a-file-server-failover-cluster"></a>파일 서버 장애 조치 (failover) 클러스터를 구성 하는 단계

파일 서버 장애 조치 (failover) 클러스터를 구성 하려면 아래 단계를 수행 합니다.

1. **서버 관리자**에서 **도구** 드롭다운을 선택 하 고 **장애 조치(Failover) 클러스터 관리자**를 선택 합니다.

2. 장애 조치(Failover) 클러스터 관리자 열리면 사용자가 만든 클러스터의 이름을 자동으로 가져옵니다.  그렇지 않은 경우 **관리** 아래의 가운데 열로 이동 하 고 **클러스터에 연결**을 선택 합니다.  사용자가 만든 클러스터의 이름을 입력 하 고 **확인**합니다.

3. 콘솔 트리에서 만든 클러스터 옆의 ">" 기호를 클릭 하 여 아래 항목을 확장 합니다.

4. 마우스 오른쪽 단추로 **역할** 을 클릭 하 고 **역할 구성**을 선택 합니다.

5. **시작 하기 전에** 창이 열리면 **다음**을 선택 합니다.

6. 역할 목록에서 **파일 서버** 및 **다음**을 선택 합니다.

7. 파일 서버 유형으로 **파일 서버를 일반 용도** 로 선택 하 고 **다음**을 클릭 합니다.<br>스케일 아웃 파일 서버에 대 한 정보는 [스케일 아웃 파일 서버 개요](sofs-overview.md)를 참조 하세요.

   ![파일 서버 유형](media/Cluster-File-Server/Cluster-FS-File-Server-Type.png)

8. **클라이언트 액세스 지점** 창에서 사용할 파일 서버의 이름을 입력 합니다.  이는 클러스터의 이름이 아닙니다.  이는 파일 공유 연결에 대 한 것입니다.  예를 들어 \\서버에 연결 하려는 경우 입력 이름은 서버입니다.

   > [!NOTE]
   > 고정 IP 주소를 사용 하는 경우 사용할 네트워크를 선택 하 고 클러스터 이름에 사용할 IP 주소를 입력 해야 합니다.  IP 주소에 DHCP를 사용 하는 경우 IP 주소가 자동으로 구성 됩니다.

6. **다음**을 선택 합니다.

7. **저장소 선택** 창에서 공유 및 **다음**을 보관할 추가 드라이브 (미러링 모니터 서버가 아님)를 선택 합니다.

8. **확인** 페이지에서 구성을 확인 하 고 **다음**을 선택 합니다.

9. **요약** 페이지에서 만든 구성을 제공 합니다.  보고서 보기를 선택 하 여 파일 서버 역할 만들기의 보고서를 볼 수 있습니다.

10. 콘솔 트리의 **역할** 아래에 만든 새 역할이 사용자가 만든 이름으로 표시 됩니다.  강조 표시 된 상태에서 오른쪽의 **작업** 창 아래에서 **공유 추가**를 선택 합니다.

11. 공유 마법사를 실행 하 여 다음을 입력 합니다.

    - 공유의 유형입니다.
    - 폴더를 공유 하는 위치/경로
    - 사용자가 연결 하는 공유의 이름입니다.
    - 액세스 기반 열거, 캐싱, 암호화 등의 추가 설정
    - 기본값이 아닌 경우 파일 수준 사용 권한

12. **확인** 페이지에서 구성 된 항목을 확인 하 고 **만들기** 를 선택 하 여 파일 서버 공유를 만듭니다.

13. **결과** 페이지에서 공유를 만든 경우 닫기를 선택 합니다.  공유를 만들 수 없는 경우 발생 하는 오류를 알려 줍니다.

14. **닫기**를 선택 합니다.

15. 추가 공유에 대해이 프로세스를 반복 합니다.