---
ms.assetid: 4cc9c16c-1928-4dce-a3a8-6229be28eb65
title: Active Directory 복제 개념
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: 96e6ae37851119b40cf03772b6a8710acaf62333
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/08/2020
ms.locfileid: "80824626"
---
# <a name="active-directory-replication-concepts"></a>Active Directory 복제 개념

>적용 대상: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

사이트 토폴로지를 디자인 하기 전에 Active Directory 복제 개념에 대해 잘 알고 있어야 합니다.  
  
-   [Connection 개체](#BKMK_1)  
  
-   [가](#BKMK_2)  
  
-   [장애 조치 (Failover) 기능](#BKMK_3)  
  
-   [온](#BKMK_4)  
  
-   [사이트별](#BKMK_5)  
  
-   [사이트 링크](#BKMK_6)  
  
-   [사이트 링크 브리지](#BKMK_7)  
  
-   [사이트 링크 전이성](#BKMK_8)  
  
-   [글로벌 카탈로그 서버](#BKMK_9)  
  
-   [유니버설 그룹 구성원 자격 캐싱](#BKMK_10)  
  
## <a name="connection-object"></a><a name="BKMK_1"></a>Connection 개체  
연결 개체는 원본 도메인 컨트롤러에서 대상 도메인 컨트롤러로의 복제 연결을 나타내는 Active Directory 개체입니다. 도메인 컨트롤러는 단일 사이트의 구성원이 고 사이트에서 Active Directory Domain Services의 서버 개체 (AD DS)로 표시 됩니다. 각 서버 개체에는 사이트의 복제 도메인 컨트롤러를 나타내는 자식 NTDS 설정 개체가 있습니다.  
  
연결 개체가 대상 서버에서 NTDS 설정 개체의 자식입니다. 두 도메인 컨트롤러 간에 복제가 발생 하려면 한 서버 개체에 다른 도메인의 인바운드 복제를 나타내는 연결 개체가 있어야 합니다. 도메인 컨트롤러에 대 한 모든 복제 연결은 NTDS 설정 개체 아래에 연결 개체로 저장 됩니다. 연결 개체는 복제 원본 서버를 식별 하 고, 복제 일정을 포함 하며, 복제 전송을 지정 합니다.  
  
지식 일관성 검사기 (KCC)는 연결 개체를 자동으로 만들지만 수동으로 만들 수도 있습니다. KCC에서 만든 연결 개체는 Active Directory 사이트 및 서비스 스냅인에 **<automatically generated>** 나타나고 정상적인 운영 상태에서 적절 한 것으로 간주 됩니다. 관리자가 만든 연결 개체는 연결 개체를 수동으로 만들었습니다. 수동으로 만든 연결 개체는 관리자가 생성 될 때 할당 된 이름으로 식별 됩니다. **<automatically generated>** 연결 개체를 수정할 때이 개체를 관리적으로 수정 된 연결 개체로 변환 하 고 개체가 GUID 형식으로 표시 됩니다. KCC는 수동 또는 수정 된 연결 개체를 변경 하지 않습니다.  
  
## <a name="kcc"></a><a name="BKMK_2"></a>가  
KCC는 모든 도메인 컨트롤러에서 실행 되 고 Active Directory 포리스트에 대해 복제 토폴로지를 생성 하는 기본 제공 프로세스입니다. KCC는 사이트 (사이트 간) 또는 사이트 간 (사이트 간)에서 복제가 발생 하는지 여부에 따라 별도의 복제 토폴로지를 만듭니다. 또한 KCC는 새 도메인 컨트롤러를 추가 하 고, 기존 도메인 컨트롤러를 제거 하 고, 사이트에서 도메인 컨트롤러를 이동 하 고, 비용과 일정을 변경 하 고, 일시적으로 사용할 수 없거나 오류 상태에 있는 도메인 컨트롤러를 추가 하는 것을 수용할 수 있도록 토폴로지를 동적으로 조정 합니다.  
  
사이트 내에서 쓰기 가능한 도메인 컨트롤러 간의 연결은 항상 양방향 링으로 정렬 되 고, 많은 사이트에서 대기 시간을 줄이기 위해 추가 바로 가기 연결이 추가 됩니다. 반면에 사이트 간 토폴로지는 스패닝 트리의 계층화입니다. 즉, 각 디렉터리 파티션에 대 한 두 사이트 사이에 하나의 사이트 간 연결이 존재 하 고 일반적으로 바로 가기 연결을 포함 하지 않습니다. 트리 확장 및 Active Directory 복제 토폴로지에 대 한 자세한 내용은 Active Directory 복제 토폴로지 기술 참조 ([https://go.microsoft.com/fwlink/?LinkID=93578](https://go.microsoft.com/fwlink/?LinkID=93578))를 참조 하세요.  
  
각 도메인 컨트롤러에서 KCC는 다른 도메인 컨트롤러의 연결을 정의 하는 단방향 인바운드 연결 개체를 만들어 복제 경로를 만듭니다. 동일한 사이트에 있는 도메인 컨트롤러의 경우 KCC는 관리 개입 없이 자동으로 연결 개체를 만듭니다. 사이트가 둘 이상 있는 경우 사이트 간의 사이트 링크를 구성 하 고 각 사이트의 단일 KCC는 사이트 간 연결을 자동으로 만듭니다.  
  
### <a name="kcc-improvements-for-windows-server-2008-rodcs"></a>Windows Server 2008 Rodc에 대 한 KCC 개선  

Windows Server 2008에서 새로 사용할 수 있는 RODC (읽기 전용 도메인 컨트롤러)를 수용 하기 위해 많은 KCC가 개선 되었습니다. RODC에 대 한 일반적인 배포 시나리오는 지점입니다. 이 시나리오에서 가장 일반적으로 배포 되는 Active Directory 복제 토폴로지는 허브 및 스포크 디자인을 기반으로 하며, 여러 사이트의 분기 도메인 컨트롤러는 허브 사이트의 적은 수의 브리지 헤드 서버를 사용 하 여 복제 합니다.  
  
이 시나리오에서 RODC를 배포할 경우의 이점 중 하나는 단방향 복제입니다. 브리지 헤드 서버는 RODC에서 복제 하는 데 필요 하지 않으므로 관리 및 네트워크 사용이 줄어듭니다.  
  
그러나 이전 버전의 Windows Server 운영 체제에서 허브-스포크 토폴로지에 의해 강조 표시 된 한 가지 관리 챌린지는 허브에 새 브리지 헤드 도메인 컨트롤러를 추가한 후 새 허브 도메인 컨트롤러를 활용 하기 위해 분기 도메인 컨트롤러와 허브 도메인 컨트롤러 간의 복제 연결을 재배포할 수 있는 자동 메커니즘이 없기 때문입니다.  
  
Windows Server 2003 도메인 컨트롤러의 경우 Windows Server 2003 지점 배포 가이드 ([https://go.microsoft.com/fwlink/?LinkID=28523](https://go.microsoft.com/fwlink/?LinkID=28523))에서 adlb .exe와 같은 도구를 사용 하 여 워크 로드의 균형을 다시 조정할 수 있습니다.  
  
Windows Server 2008 Rodc의 경우 KCC의 정상적인 작동은 약간의 균형을 제공 하므로 Adlb .exe와 같은 추가 도구를 사용 하지 않아도 됩니다. 새 기능은 기본적으로 사용 하도록 설정 되어 있습니다. RODC에 설정 된 다음 레지스트리 키를 추가 하 여 사용 하지 않도록 설정할 수 있습니다.  
  
**HKEY_LOCAL_MACHINE \SYSTEM\CurrentControlSet\Services\NTDS\Parameters**  
  
**"Random BH Loadbalancing Allowed"**  
**1 = 사용 (기본값), 0 = 사용 안 함**  
  
이러한 KCC의 향상 된 기능에 대 한 자세한 내용은 지점에 대 한 Active Directory Domain Services 계획 및 배포 ([https://go.microsoft.com/fwlink/?LinkId=107114](https://go.microsoft.com/fwlink/?LinkId=107114))를 참조 하세요.  
  
## <a name="failover-functionality"></a><a name="BKMK_3"></a>장애 조치 (Failover) 기능  
사이트는 네트워크 오류 및 오프 라인 도메인 컨트롤러에 대해 복제가 라우팅되는 지 확인 합니다. KCC는 지정 된 간격으로 실행 되어 새 도메인 컨트롤러를 추가 하 고 새 사이트를 만들 때와 같이 AD DS에 발생 하는 변경 내용에 대 한 복제 토폴로지를 조정 합니다. KCC는 기존 연결의 복제 상태를 검토 하 여 연결이 작동 하지 않는 경우를 확인 합니다. 실패 한 도메인 컨트롤러 때문에 연결이 작동 하지 않는 경우 KCC는 다른 복제 파트너 (사용 가능한 경우)에 대 한 임시 연결을 자동으로 빌드하여 복제가 수행 되도록 합니다. 사이트의 모든 도메인 컨트롤러를 사용할 수 없는 경우 KCC는 다른 사이트의 도메인 컨트롤러 간에 복제 연결을 자동으로 만듭니다.  
  
## <a name="subnet"></a><a name="BKMK_4"></a>온  
서브넷은 논리 IP 주소 집합을 할당 하는 TCP/IP 네트워크의 세그먼트입니다. 서브넷은 네트워크에서 물리적 근접을 식별 하는 방식으로 컴퓨터를 그룹화 합니다. AD DS의 서브넷 개체는 사이트에 컴퓨터를 매핑하는 데 사용 되는 네트워크 주소를 식별 합니다.  
  
## <a name="site"></a><a name="BKMK_5"></a>사이트별  
사이트는 안정적이 고 빠른 네트워크 연결을 사용 하 여 하나 이상의 TCP/IP 서브넷을 나타내는 개체를 Active Directory 합니다. 관리자는 사이트 정보를 사용 하 여 Active Directory 액세스 및 복제를 구성 하 여 실제 네트워크의 사용량을 최적화할 수 있습니다. 사이트 개체는 서브넷 집합과 연결 되며, 포리스트의 각 도메인 컨트롤러는 해당 IP 주소에 따라 Active Directory 사이트와 연결 됩니다. 사이트는 둘 이상의 도메인에서 도메인 컨트롤러를 호스트할 수 있으며 도메인은 둘 이상의 사이트에서 표시 될 수 있습니다.  
  
## <a name="site-link"></a><a name="BKMK_6"></a>사이트 링크  
사이트 링크는 Active Directory 복제에 대 한 연결을 설정 하는 데 KCC에서 사용 하는 논리적 경로를 나타내는 개체 Active Directory입니다. 사이트 링크 개체는 지정 된 사이트 간 전송을 통해 균일 한 비용으로 통신할 수 있는 사이트 집합을 나타냅니다.  
  
사이트 링크 내에 포함 된 모든 사이트는 동일한 네트워크 종류를 통해 연결 된 것으로 간주 됩니다. 사이트 링크를 사용 하 여 사이트를 다른 사이트에 수동으로 연결 해야 한 사이트의 도메인 컨트롤러가 다른 사이트의 도메인 컨트롤러에서 디렉터리 변경 내용을 복제할 수 있습니다. 사이트 링크는 복제 중에 실제 네트워크의 네트워크 패킷에 사용 되는 실제 경로와 일치 하지 않기 때문에 Active Directory 복제 효율성을 향상 시키기 위해 중복 된 사이트 링크를 만들 필요가 없습니다.  
  
사이트 링크로 연결 된 두 사이트가 있는 경우 복제 시스템은 브리지 헤드 서버 라고 하는 각 사이트의 특정 도메인 컨트롤러 간에 연결을 자동으로 만듭니다. Windows Server 2008에서는 동일한 디렉터리 파티션을 호스트 하는 사이트의 모든 도메인 컨트롤러가 브리지 헤드 서버로 선택 됩니다. KCC에서 만든 복제 연결은 복제 작업을 공유 하기 위해 사이트의 모든 후보 브리지 헤드 서버 간에 무작위로 분산 됩니다. 기본적으로 연결 개체가 사이트에 처음 추가 될 때 임의 선택 프로세스는 한 번만 수행 됩니다.  
  
## <a name="site-link-bridge"></a><a name="BKMK_7"></a>사이트 링크 브리지  
사이트 링크 브리지는 사이트 링크 집합을 나타내는 개체입니다. Active Directory이 개체는 모두 공통 전송을 사용 하 여 통신할 수 있는 사이트 링크를 포함 합니다. 사이트 링크 브리지를 사용 하면 통신 링크를 통해 직접 연결 되지 않은 도메인 컨트롤러를 서로 복제할 수 있습니다. 일반적으로 사이트 링크 브리지는 IP 네트워크의 라우터 (또는 라우터 집합)에 해당 합니다.  
  
기본적으로 KCC는 일부 사이트가 공통 된 모든 사이트 링크를 통해 전이적 경로를 구성할 수 있습니다. 이 동작을 사용 하지 않도록 설정 하는 경우 각 사이트 링크는 자체의 고유 네트워크와 격리 된 네트워크를 나타냅니다. 단일 경로로 처리할 수 있는 사이트 링크 집합은 사이트 링크 브리지를 통해 표현 됩니다. 각 브리지는 네트워크 트래픽에 대 한 격리 된 통신 환경을 나타냅니다.  
  
사이트 링크 브리지는 사이트 간 전이적 실제 연결을 논리적으로 나타내는 메커니즘입니다. 사이트 링크 브리지를 사용 하면 KCC에서 포함 된 사이트 링크의 조합을 사용 하 여 해당 사이트에 있는 디렉터리 파티션을 상호 연결 하는 데 가장 저렴 한 경로를 결정할 수 있습니다. 사이트 링크 브리지는 도메인 컨트롤러에 대 한 실제 연결을 제공 하지 않습니다. 사이트 링크 브리지가 제거 되 면 KCC가 링크를 제거할 때까지 결합 된 사이트 링크를 통한 복제가 계속 됩니다.  
  
사이트 링크 브리지는 인접 사이트의 도메인 컨트롤러에도 호스트 되지 않는 디렉터리 파티션을 호스트 하는 도메인 컨트롤러가 사이트에 포함 되어 있지만 해당 디렉터리 파티션을 호스트 하는 도메인 컨트롤러가 포리스트의 다른 사이트 하나 이상에 있는 경우에만 필요 합니다. 인접 사이트는 단일 사이트 링크에 포함 된 둘 이상의 사이트로 정의 됩니다.  
  
사이트 링크 브리지는 두 사이트 링크 사이에 논리적 연결을 만들며, 중간 사이트를 사용 하 여 연결이 끊어진 두 사이트 간의 전이적 경로를 제공 합니다. ISTG (사이트 간 토폴로지 생성기)의 목적상, 브리지는 중간 사이트를 사용 하 여 실제 연결을 의미 합니다. 이 브리지는 중간 사이트의 도메인 컨트롤러가 복제 경로를 제공 한다는 것을 의미 하지는 않습니다. 그러나이 경우에는 복제할 디렉터리 파티션을 호스트 하는 도메인 컨트롤러가 중간 사이트에 포함 되어 있는 경우에는 사이트 링크 브리지가 필요 하지 않습니다.  
  
각 사이트 링크의 비용이 추가 되어 결과 경로에 대 한 총 비용이 생성 됩니다. 사이트 링크 브리지는 중간 사이트에 디렉터리 파티션을 호스트 하는 도메인 컨트롤러가 없고 저렴 한 비용 링크가 없는 경우에 사용 됩니다. 중간 사이트에 디렉터리 파티션을 호스트 하는 도메인 컨트롤러가 포함 된 경우 연결이 끊어진 두 사이트는 중간 도메인 컨트롤러에 대 한 복제 연결을 설정 하 고 브리지를 사용 하지 않습니다.  
  
## <a name="site-link-transitivity"></a><a name="BKMK_8"></a>사이트 링크 전이성  
기본적으로 모든 사이트 링크는 전이적 또는 "브리지 됨"입니다. 사이트 링크가 브리지로 연결 되 고 일정이 겹치면 사이트 간 도메인 컨트롤러 복제 파트너를 결정 하는 복제 연결을 만듭니다. 여기서 사이트는 사이트 링크로 직접 연결 되어 있지 않지만 공통 사이트 집합을 통해 전이적으로 연결 됩니다. 즉, 사이트 링크를 조합 하 여 모든 사이트를 다른 사이트에 연결할 수 있습니다.  
  
일반적으로 완벽 하 게 라우팅되는 네트워크의 경우 복제 변경의 흐름을 제어 하려는 경우가 아니면 사이트 링크 브리지를 만들 필요가 없습니다. 네트워크가 완전히 라우팅되지 않은 경우에는 복제 시도를 불가능 하 게 방지 하기 위해 사이트 링크 브리지를 만들어야 합니다. 특정 전송에 대 한 모든 사이트 링크는 암시적으로 해당 전송에 대 한 단일 사이트 링크 브리지에 속합니다. 사이트 링크에 대 한 기본 브리징은 자동으로 발생 하며, Active Directory 개체가 해당 브리지를 나타내는 것은 아닙니다. IP 및 SMTP (Simple Mail Transfer Protocol) 사이트 간 전송 컨테이너의 속성에 있는 **모든 사이트 링크 브리지** 설정은 자동 사이트 링크 브리징을 구현 합니다.  
  
> [!NOTE]  
> 이후 버전의 AD DS에서는 SMTP 복제가 지원 되지 않습니다. 따라서 SMTP 컨테이너에 사이트 링크 개체를 만드는 것은 권장 되지 않습니다.  
  
## <a name="global-catalog-server"></a><a name="BKMK_9"></a>글로벌 카탈로그 서버  
글로벌 카탈로그 서버는 포리스트의 모든 개체에 대 한 정보를 저장 하는 도메인 컨트롤러입니다. 따라서 응용 프로그램은 요청 된 데이터를 저장 하는 특정 도메인 컨트롤러를 참조 하지 않고 AD DS 검색할 수 있습니다. 모든 도메인 컨트롤러와 마찬가지로 글로벌 카탈로그 서버는 스키마 및 구성 디렉터리 파티션에 대 한 쓰기 가능한 전체 복제본과 호스트 하는 도메인에 대 한 도메인 디렉터리 파티션의 전체 쓰기 가능 복제본을 저장 합니다. 또한 글로벌 카탈로그 서버는 포리스트의 다른 모든 도메인에 대 한 일부 읽기 전용 복제본을 저장 합니다. 부분, 읽기 전용 도메인 복제본은 도메인의 모든 개체를 포함 하지만 특성의 하위 집합 (개체 검색에 가장 일반적으로 사용 되는 특성)만 포함 합니다.  
  
## <a name="universal-group-membership-caching"></a><a name="BKMK_10"></a>유니버설 그룹 구성원 자격 캐싱  
유니버설 그룹 구성원 자격 캐싱을 사용 하면 도메인 컨트롤러에서 사용자에 대 한 유니버설 그룹 멤버 자격 정보를 캐시할 수 있습니다. Active Directory 사이트 및 서비스 스냅인을 사용 하 여 Windows Server 2008를 실행 하는 도메인 컨트롤러가 유니버설 그룹 멤버 자격을 캐시 하도록 할 수 있습니다.  
  
유니버설 그룹 구성원 자격 캐싱을 사용 하면 도메인 컨트롤러가 포리스트에 있는 모든 개체를 복제할 필요가 없기 때문에 네트워크 대역폭 사용량을 최소화 하는 도메인의 모든 사이트에서 글로벌 카탈로그 서버를 사용할 필요가 없습니다. 또한 인증 도메인 컨트롤러가 유니버설 그룹 멤버 자격 정보를 얻기 위해 항상 글로벌 카탈로그에 액세스할 필요가 없기 때문에 로그온 시간이 줄어듭니다. 유니버설 그룹 멤버 자격 캐싱을 사용 하는 경우에 대 한 자세한 내용은 [글로벌 카탈로그 서버 배치 계획](../../../ad-ds/plan/Planning-Global-Catalog-Server-Placement.md)을 참조 하십시오.  
  


